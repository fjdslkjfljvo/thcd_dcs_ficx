% \documentclass{beamer}
% \usepackage{beamerthemesplit}
% % \usetheme{Marburg}
% \usecolortheme{orchid}

\documentclass[10pt]{beamer}

\usetheme{Singapore}

\usepackage{amsfonts,amsmath,amssymb,amsthm,graphicx}
\usepackage{changepage}
\usepackage{enumerate}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{natbib}
\usepackage{color}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{amsthm,multirow,commath}
\usepackage{xcolor}
\usepackage{subcaption} % Needed for subfigure captions

\usepackage{sansmathaccent}
\pdfmapfile{+sansmathaccent.map}

%\newtheorem{theorem}{Theorem}
%\newtheorem{corollary}{Corollary}
%\newtheorem{newthm}{Theorem}
%\newtheorem{newdefn}{Definition}
\newtheorem{observation}{Observation}
%\newtheorem{example}{Example}
%\newtheorem{newclm}{Claim}
%\newtheorem{newconjecture}{Conjecture}
%\newtheorem{definition}{Definition}
%\newtheorem{lemma}{Lemma}
%\newtheorem{problem}{Problem}
\newtheorem{procedure}{Procedure}

\newcommand{\s}{\mathcal{S}}
\renewcommand{\i}{\mathcal{I}}
\renewcommand{\k}{\mathcal{K}}
\newcommand{\natr}{\mathcal{N}}
\newcommand{\udl}[1]{{\color{blue} #1}}




%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------




\title[]{Title} % The short title appears at the bottom of every slide, the full title is only on the title page


\author{}

\date{August 9, 2024}



\begin{document}

\frame{\titlepage}






\begin{frame}{Overview}


Market data and 123xx features, from 2021 to 2024-06, xx datapoints.
\begin{itemize}
    \item BBO, volume, hour, s.trade, ema\_diff, emd, \emph{etc.}
\end{itemize}
\pause
Predict average forward return in 1-2 hours.
\begin{itemize}
    \item $\log\left(\frac{\text{average mid price in 1 to 2 hours}}{\text{current mid price}}\right)$
\pause
    \item linear regression, XGBoost, further adjustment for certain features
\end{itemize}
\pause
Simulation, trade based on prediction.




\end{frame}


\begin{frame}{Data Preprocessing}

\begin{itemize}
    \item Missing values. Forward fill prices.
\pause
    \item Resampling: resample every 5 seconds.
\pause
    \item Data Splitting
    \begin{itemize}
        \item training: 2021-01 to 2022-xx
        \item validation: 2023-xx to 2024-03-15
        \item testing: 2024-03-15 to 2024-06
    \end{itemize}
\pause
    \item Standardization. $x=\frac{x-x.mean}{x.std}$.
\pause
    \item Create new features, stats of existed features, combinations.
\end{itemize}


\end{frame}


\begin{frame}{Lasso}


\begin{itemize}
    \item Remove positive features, such as volume, hour.
    \item Train using training set, choose lasso parameter $\alpha$ that maximizes $r^2$ on validation set.
\end{itemize}

\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{lasso $r^2$}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
$r^2$      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
correlation      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}

\begin{frame}{Select features by t-values}

\begin{itemize}
    \item Again, remove positive features, such as volume, hour.
    \item Remove highly correlated features.
    \item Sort features by t-values in linear regression, from high to low.
    \item Train a ridge regression model using first $k$ features.
\end{itemize}
\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{t-value $r^2$}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
$r^2$      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
correlation      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}

\begin{frame}{XGBoost model}


\begin{itemize}
    \item Train a model using all the features
    \item Using features selected in linear regression
    \item Linear regression predictions as features
    \item Add positive features by feature importance
\end{itemize}


\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{feature importance}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
$r^2$      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
correlation      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}

\begin{frame}{Hyperparameter tuning}


\begin{itemize}
    \item Train a model using all the features
    \item Using features selected in linear regression
    \item Linear regression predictions as features
    \item Add positive features by feature importance
\end{itemize}


\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{feature importance}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
$r^2$      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
correlation      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}

\begin{frame}{Side result: a simple tree model}




\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{the simple tree model}
\end{figure}

\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
$r^2$      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
correlation      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}

\end{frame}


\begin{frame}{Simulation}

Strategy,


\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{demonstrate strategy, explain trade, size}
\end{figure}

Parameters: 


\end{frame}

\begin{frame}{Simulation, Lasso}


\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 1}
        \label{fig:figure1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 2}
        \label{fig:figure2}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 3}
        \label{fig:figure3}
    \end{subfigure}
    \caption{Main caption for the three figures.}
    \label{fig:three_figures}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
trade per day      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
pnl per size      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
sharpe      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}


\begin{frame}{Simulation, Ridge with features selected by t-values}


\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 1}
        \label{fig:figure1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 2}
        \label{fig:figure2}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 3}
        \label{fig:figure3}
    \end{subfigure}
    \caption{Main caption for the three figures.}
    \label{fig:three_figures}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
trade per day      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
pnl per size      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
sharpe      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}

\begin{frame}{Simulation, tree model}


\begin{figure}[h!]
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 1}
        \label{fig:figure1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 2}
        \label{fig:figure2}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{fig/lasso_r2.png}
        \caption{Caption for Figure 3}
        \label{fig:figure3}
    \end{subfigure}
    \caption{Main caption for the three figures.}
    \label{fig:three_figures}
\end{figure}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
trade per day      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
pnl per size      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
sharpe      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}



\begin{frame}{Scale prediction by hour}



\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{fig/lasso_r2.png}
    \caption{scales}
\end{figure}

\begin{itemize}
    \item For hour $i$, $a_i \leftarrow \beta_i a_i$
    \item $\beta_i = $
    \item Using features selected in linear regression
    \item Linear regression predictions as features
    \item Add positive features by feature importance
\end{itemize}


\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c}
\hline
 & \textbf{training} & \textbf{validation} & \textbf{testing} \\ \hline
trade per day      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
pnl per size      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
sharpe      & Row 1, Col 2      & Row 1, Col 3      & Row 1, Col 4      \\ \hline
\end{tabular}
\end{table}


\end{frame}



\begin{frame}
\begin{center}
\begin{LARGE}
\textcolor{black}{Thanks!}
\end{LARGE}
\end{center}
\end{frame}







%\input{newton}

% \section[Outline]{}
% \frame{\tableofcontents}

% \input{content/extra.tex}

\end{document}
